## 黑马头条PC-账户信息-新增页面-挂载路由

**`思路-步骤`**

## 黑马头条PC-账户信息-页面结构

**`思路-步骤`**

* 表单 => el-form=> el-form-item

* ```css
  .head-upload {
     position: absolute;
     right: 300px;
     top:200px;
      img {
         width: 200px;
         height: 200px;
          border-radius: 50%;
      }
  }
  ```

* ```html
  <el-card>
        <bread-crumb slot="header">
          <template slot='title'>账户信息</template>
        </bread-crumb>
        <!-- 表单 => 表单容器 -->
        <el-form style="margin-left:100px" label-width="100px">
            <el-form-item label="用户名">
                <el-input style="width:40%"></el-input>
            </el-form-item>
             <el-form-item label="简介">
                 <el-input style="width:40%"></el-input>
             </el-form-item>
             <el-form-item label="邮箱">
                 <el-input style="width:40%"></el-input>
             </el-form-item>
             <el-form-item label="手机号">
                 <el-input disabled style="width:40%"></el-input>
             </el-form-item>
             <el-form-item>
                 <el-button type="primary">保存信息</el-button>
             </el-form-item>
        </el-form>
        <!-- 上传组件 -->
        <el-upload class='head-upload' action="" :show-file-list="false">
            <img src="../../assets/img/cat.jpg" alt="">
        </el-upload>
    </el-card>
  ```

* 

## 黑马头条PC-账户信息-数据加载给表单

**`思路-步骤`**

```js
export default {
  data () {
    return {
      formData: {
        name: '', // 用户名
        intro: '', // 简介
        photo: '', // 头像
        email: '', // 邮箱
        mobile: ''
      },
      defaultImg: require('../../assets/img/cat.jpg')
    }
  },
  methods: {
    //   获取用户个人信息
    getUserInfo () {
      this.$axios({
        url: '/user/profile'
      }).then(result => {
        this.formData = result.data
      })
    }
  },
  created () {
    this.getUserInfo()
  }

}
```



## 黑马头条PC-账户信息-用户数据保存

**`思路-步骤`**

* 保存之前  => 校验

* el-form =>  model =>rules

* el-form-item => prop

* el-input  => v-model

* 表单校验方法 validate  => 支持回调用法 ,也支持promise用法 => 校验成功会进入到then ,否则进入到catch

* ```js
  // suncaiGuanli  => 千万杜绝
    // baocunyonghuxinxi
    // 保存用户信息
    saveUserInfo () {
      this.$refs.myForm.validate().then(result => {
        //  调用保存接口
        this.$axios({
          url: '/user/profile',
          method: 'patch',
          data: this.formData
        }).then(result => {
          this.$message({
            type: 'success',
            message: '保存用户信息成功'
          })
        })
      })
    }
  ```

* 

## 黑马头条PC-账户信息-头像上传更新

**`思路-步骤`**

```js
  uploadImg (params) {
      this.loading = true // 打开弹层
      let data = new FormData()
      data.append('photo', params.file)
      this.$axios({
        url: '/user/photo',
        method: 'patch',
        data
      }).then(result => {
        this.loading = false // 关闭弹层
        this.formData.photo = result.data.photo // 给当前的头像赋值
      })
    }
```

## 黑马头条PC-账户信息更新-同步到头部页面之eventBus

**`思路-步骤`**

* eventBus => event事件 Bus =>公共领域  => 公共事件池 

* this.$emit => this => 当前实例 => 当前实例触发的事件,只能在当前实例监听

* 通信 => 连接线 => 一个实例 =>A 组件 如果在它自己的实例中触发一个事件  => B组件肯定监听不到!!!!

* A组件 在一个**`公共的实例`**上去触发一个事件,B组件去这个**`公共的实例`**上监听

* 公共的实例  =>eventBus => 做一个公共的实例

* ```js
  // 公共实例
  import Vue from 'vue'
  export default new Vue() // 公共实例 => 实例化了一个Vue
  
  ```

* 任何组件间的传值  => eventBus => 父 => 子  子 => 父  兄弟传值  非关系组件

* this.$emit => eventBus.**`$emit`**(自定义事件,若干参数)

* eventBus.**`$on`**(事件名, function(若干参数){})

* ```js
      // 认为保存成功 => 通知header组件 更新信息
      eventBus.$emit('updateUserInfo')
  ```

* ```js
      eventBus.$on('updateUserInfo', () => {
        // 认为别人更新了数据 自己也应该更新
        this.getUserInfo()
      })
  ```

  

## 黑马头条PC-扩展-在素材管理中添加轮播图

**`思路-步骤`**

```js
openEnd () {
      // 此时已经可以获取走马灯实例了 ref
      this.$refs.myCarosel.setActiveItem(this.clickIndex)
    },
    // 打开弹层
    openDialog (index) {
      this.dialogVisible = true // dialog是懒加载 => 第一次没有弹出之前 是没有组件元素的
      // 没有办法在弹层中立刻做设置索引
      this.clickIndex = index // 存储一下 点击索引
    }
```

```html
 <el-dialog @opened="openEnd" :visible="dialogVisible" @close="dialogVisible = false">
       <el-carousel ref="myCarosel" indicator-position="outside" height="500px">
         <el-carousel-item v-for="(item,index) in list" :key="index">
           <img style="width:100%;height:100%" :src="item.url" alt="">
       </el-carousel-item>
      </el-carousel>
    </el-dialog>
```



## 黑马头条PC-扩展-在文章列表中添加预览

**`思路-步骤`**
