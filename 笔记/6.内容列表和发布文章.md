## 黑马头条PC-内容列表-新建页面-挂载路由

**`思路-步骤`**

* 新建一个路由级组件 
* 挂载到二级路由上 => 按需加载

## 黑马头条PC-内容列表-页面结构-搜索工具栏

**`思路-步骤`**

* 表单容器 => model   rules => el-form => 这些属性是校验时必须写的,一般的绑定不需要写

* ```html
  <el-form style="padding-left:50px">
          <el-form-item label="文章状态:">
              <!-- 放置一个单选组  文章状态，0-草稿，1-待审核，2-审核通过，3-审核失败，4-已删除，不传为全部-->
              <el-radio-group v-model="searchForm.status">
                  <!-- label -->
                  <el-radio :label="5">全部</el-radio>
                  <el-radio :label="0">草稿</el-radio>
                  <el-radio :label="1">待审核</el-radio>
                  <el-radio :label="2">审核通过</el-radio>
                  <el-radio :label="3">审核失败</el-radio>
              </el-radio-group>
          </el-form-item>
          <el-form-item label="频道列表:">
              <el-select placeholder="请选择频道" v-model="searchForm.channel_id">
                  <!-- el-option label是显示值 value是存储值 -->
                  <el-option v-for="item in channels" :key="item.id" :label="item.name" :value="item.id"></el-option>
              </el-select>
          </el-form-item>
          <el-form-item label="时间选择:">
              <!-- 日期选择器 日期范围-->
              <el-date-picker v-model="searchForm.dateRange" type="daterange"></el-date-picker>
          </el-form-item>
      </el-form>
  ```

  

## 黑马头条PC-内容列表-页面主体结构

**`思路-步骤`**

* 手写的方式 实现页面的主题结构

* ```html
  <el-card class='articles'>
        <bread-crumb slot='header'>
           <template slot='title'>文章列表</template>
        </bread-crumb>
        <!-- 表单容器 -->
        <el-form style="padding-left:50px">
            <el-form-item label="文章状态:">
                <!-- 放置一个单选组  文章状态，0-草稿，1-待审核，2-审核通过，3-审核失败，4-已删除，不传为全部-->
                <el-radio-group v-model="searchForm.status">
                    <!-- label -->
                    <el-radio :label="5">全部</el-radio>
                    <el-radio :label="0">草稿</el-radio>
                    <el-radio :label="1">待审核</el-radio>
                    <el-radio :label="2">审核通过</el-radio>
                    <el-radio :label="3">审核失败</el-radio>
                </el-radio-group>
            </el-form-item>
            <el-form-item label="频道列表:">
                <el-select placeholder="请选择频道" v-model="searchForm.channel_id">
                    <!-- el-option label是显示值 value是存储值 -->
                    <el-option v-for="item in channels" :key="item.id" :label="item.name" :value="item.id"></el-option>
                </el-select>
            </el-form-item>
            <el-form-item label="时间选择:">
                <!-- 日期选择器 日期范围-->
                <el-date-picker v-model="searchForm.dateRange" type="daterange"></el-date-picker>
            </el-form-item>
        </el-form>
        <el-row class='total' type='flex' align="middle">
            <span>
                共找到10000条符合条件的内容
            </span>
        </el-row>
        <div class='article-item' v-for="item in 100" :key="item">
            <!-- 左侧 -->
            <div class='left'>
                <img src="../../assets/img/default.jpg" alt="">
                <div class='info'>
                    <span>90期的弟弟们，哈哈哈啊哈哈哈嗝</span>
                    <el-tag class='tag'>标签一</el-tag>
                    <span class='date'>2019-12-24 15:07:01</span>
                </div>
            </div>
            <!-- 右侧 -->
            <div class='right'>
                <span><i class="el-icon-edit"></i>修改</span>
                <span><i class="el-icon-delete"></i>删除</span>
            </div>
        </div>
    </el-card>
  ```

  

## 黑马头条PC-内容列表-请求数据

**`思路-步骤`**

* 调用接口 =>先不做筛选,不做分页

* 过滤器 不但可以用在插值表达式 

* 还可以用在 v-bind表达式

* ```html
      <div class='article-item' v-for="item in list" :key="item.id.toString()">
          <!-- 左侧 -->
          <div class='left'>
              <img :src="item.cover.images.length ? item.cover.images[0] : defaultImg" alt="">
              <div class='info'>
                  <span>{{ item.title }}</span>
                  <!-- 文章状态 0-草稿，1-待审核，2-审核通过，3-审核失败，4-已删除 -->
                  <el-tag :type="item.status | filterType" class='tag'>{{ item.status | filterStatus }}</el-tag>
                  <span class='date'>{{ item.pubdate }}</span>
              </div>
          </div>
          <!-- 右侧 -->
          <div class='right'>
              <span><i class="el-icon-edit"></i>修改</span>
              <span><i class="el-icon-delete"></i>删除</span>
          </div>
      </div>
  ```

* ```js
      getArticles () {
        this.$axios({
          url: '/articles'
        }).then(result => {
          this.list = result.data.results // 获取文章列表数据
        })
      }
  ```

* 

## 黑马头条PC-内容列表-页面结构-搜索筛选

**`思路-步骤`**

* 条件 => 组合条件 => 不论谁的数据发生变化 =>先组装条件  => 统一发送请求

* 第一种做法=>监听每个组件的change事件

* ```js
  changeCondition () {
     let params = {
       status: this.searchForm.status === 5 ? null : this.searchForm.status, // 因为5是前端定义的一个标识, 如果等于5 表示查全部, 全部应该什么都不传 直接传null
       channel_id: this.searchForm.channel_id,
       begin_pubdate: this.searchForm.dateRange.length ? this.searchForm.dateRange[0] : null, // 开始时间
       end_pubdate: this.searchForm.dateRange.length > 1 ? this.searchForm.dateRange[1] : null // 截止时间
     }
     this.getArticles(params)
   }
  ```

* 第二种做法 => watch 去监听数据变化

* ```js
  watch: {
      name: function(newValue,oldValue){
          
      }
  }
  // 传统模式  a: { b:{c:'123'} }
  watch:{
     "a.b.c":function(){}
  }
  watch: {
      a:{
          handler:function(){
              // this指向当前实例
          } // handler是一个固定写法 默认对象中任何的变化都会触发该函数
          deep: true // deep 深度检测 不论嵌套多少层 都可以监听到改变
      }
  }
  ```

* 

## 黑马头条PC-内容列表-分页请求

**`思路-步骤`**

```js
    //   改变页码方法
    changePage (newPage) {
      this.page.currentPage = newPage // 最新页码
      this.getConditionArticle() // 调用获取文章数据
    },
    //   改变条件
    changeCondition () {
      this.page.currentPage = 1 // 强制将页码重置第一页
      this.getConditionArticle() // 调用获取文章数据
    },
    getConditionArticle () {
      let params = {
        page: this.page.currentPage,
        per_page: this.page.pageSize,
        status: this.searchForm.status === 5 ? null : this.searchForm.status, // 因为5是前端定义的一个标识, 如果等于5 表示查全部, 全部应该什么都不传 直接传null
        channel_id: this.searchForm.channel_id,
        begin_pubdate: this.searchForm.dateRange.length ? this.searchForm.dateRange[0] : null, // 开始时间
        end_pubdate: this.searchForm.dateRange.length > 1 ? this.searchForm.dateRange[1] : null // 截止时间
      }
      this.getArticles(params)
    }
```

* 页码改变时 => 设置最新页码 => 收集原来的条件参数 => 组合 =>查询
* 条件改变时 => 强制页码到第一页 => 收集参数  =>组合 =>查询

## 黑马头条PC-内容列表-页面结构-删除内容

**`思路-步骤`**

* 删除内容 => 只能删除 草稿 => 不能删除 已发表的

* 注册删除的事件

* ```js
      delMaterial (id) {
        this.$confirm('是否要删除该文章?').then(() => {
          // 调用删除接口
          this.$axios({
            method: 'delete',
            url: `/articles/${id.toString()}`
          }).then(result => {
            // 提示
            this.$message({
              type: 'success',
              message: '删除成功'
            })
            // 重新拉取数据
            // this.page.currentPage = 1 // 根据业务 处理 如果删除了数据 是否回到第一页根据具体业务而定
            this.getConditionArticle()
          })
        })
      }
  ```

* 

## 黑马头条PC-发表文章-新建页面-挂载路由

**`思路-步骤`**

* 路由级组件
* 挂载二级路由  => 按需加载

## 黑马头条PC-发表文章-页面结构-简单实现

**`思路-步骤`**

```html
<el-card>
      <bread-crumb slot='header'>
        <template slot='title'>
            发布文章
        </template>
      </bread-crumb>
      <!-- 容器 -->
      <el-form style="margin-left:50px" label-width="100px">
          <el-form-item label="标题">
              <el-input style="width:60%"></el-input>
          </el-form-item>
          <el-form-item label="内容">
                 <el-input
                 type="textarea"
                :rows="4"></el-input>
          </el-form-item>
          <el-form-item label="封面">
              <el-radio-group>
                  <el-radio>单图</el-radio>
                  <el-radio>三图</el-radio>
                  <el-radio>无图</el-radio>
                  <el-radio>自动</el-radio>
              </el-radio-group>
          </el-form-item>
          <el-form-item label="频道">
              <el-select></el-select>
          </el-form-item>
          <el-form-item>
              <el-button type='primary'>发布</el-button>
              <el-button>存入草稿</el-button>

          </el-form-item>
      </el-form>
  </el-card>
```



## 黑马头条PC-发表文章-频道数据加载

**`思路-步骤`**

## 黑马头条PC-发表文章-发布文章检验逻辑实现

**`思路-步骤`**

## 黑马头条PC-发表文章-发布文章

**`思路-步骤`**

## 黑马头条PC-修改文章-发布页面-简单模式跳转

**`思路-步骤`**

## 黑马头条PC-修改文章-逻辑实现

**`思路-步骤`**

## 黑马头条PC-发布文章-注册富文本编辑器

**`思路-步骤`**

## 黑马头条PC-发布文章-富文本编辑器应用

**`思路-步骤`**

## 黑马头条PC-发布文章-封面功能设计

**`思路-步骤`**

## 黑马头条PC-发布文章-封面功能实现